<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conceptos y Hallazgos - Tesis Doctoral</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --concept-color: #9b59b6;
            --instrument-color: #1abc9c;
            --methodology-color: #e67e22;
            --finding-color: #e74c3c;
            --intervention-color: #3498db;
            --approach-color: #f1c40f;
            --context-color: #7f8c8d;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 30px 0;
            text-align: center;
            border-radius: 0 0 15px 15px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .search-container {
            margin: 20px 0;
            position: relative;
        }
        
        #conceptSearch {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        #conceptSearch:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }
        
        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
        }
        
        .categories-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .category-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border-left: 6px solid var(--secondary-color);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .category-card:hover {
            transform: translateY(-7px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.15);
        }
        
        .category-card.journey { border-left-color: #34495e; }
        .category-card.theory { border-left-color: var(--methodology-color); }
        .category-card.findings { border-left-color: var(--finding-color); }
        .category-card.implications { border-left-color: var(--success-color); }
        .category-card.concepts { border-left-color: var(--concept-color); }

        
        .category-card h3 {
            color: var(--primary-color);
            margin-bottom: 18px;
            font-size: 1.4rem;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        .concepts-list {
            list-style-type: none;
            flex-grow: 1;
        }
        
        .concepts-list li {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
            border-radius: 6px;
            padding-left: 10px;
            cursor: pointer;
            position: relative;
        }
        
        .concepts-list li:hover {
            background-color: #f8f9fa;
            transform: translateX(5px);
        }
        
        .concepts-list li:active {
            transform: scale(0.98);
        }
        
        .concepts-list li:last-child {
            border-bottom: none;
        }
        
        /* Estilos del Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            margin: 40px auto;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalAppear 0.3s ease-out;
            overflow: hidden;
        }
        
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--dark-color));
            color: white;
            padding: 25px 30px;
            position: relative;
        }
        
        .modal-header h2 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }
        
        .modal-subtitle {
            font-style: italic;
            opacity: 0.9;
            margin-top: 8px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 2rem;
            cursor: pointer;
            color: white;
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .close-modal:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .info-section {
            margin-bottom: 30px;
        }
        
        .info-section:last-child {
            margin-bottom: 0;
        }
        
        .info-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            padding-bottom: 8px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .info-section p, .info-section ul {
            margin-bottom: 15px;
            line-height: 1.7;
        }
        .info-section ul {
            padding-left: 20px;
        }
        .info-section a {
            color: var(--secondary-color);
            text-decoration: none;
            font-weight: bold;
            border-bottom: 2px dashed #d6eaf8;
            transition: all 0.2s;
        }
        .info-section a:hover {
            background-color: #d6eaf8;
            border-bottom-style: solid;
        }

        .application-context {
            background-color: #e8f4fc;
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        .related-concepts-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 10px;
        }
        .related-link {
            background-color: #e8f4fc;
            color: var(--secondary-color);
            padding: 8px 16px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            border: 2px solid #d6eaf8;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .related-link:hover {
            background-color: var(--secondary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
        }

        .modal-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .nav-btn {
            padding: 10px 20px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn:hover:not(:disabled) {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .nav-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            display: none;
        }
        
        @media (max-width: 768px) {
            .categories-container {
                grid-template-columns: 1fr;
            }
            h1 { font-size: 1.8rem; }
            .modal-content { width: 95%; margin: 20px auto; }
            .modal-header, .modal-body { padding: 20px; }
            .modal-navigation { flex-direction: column; gap: 10px; }
            .nav-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Conceptos y Hallazgos de Investigaci√≥n</h1>
            <p class="subtitle">Una exploraci√≥n interactiva de la narrativa, los fundamentos te√≥ricos y los descubrimientos clave de la tesis.</p>
        </div>
    </header>
    
    <div class="container">
        <main>
            <div class="search-container">
                <input type="text" id="conceptSearch" placeholder="Buscar conceptos, teor√≠as o hallazgos...">
                <span class="search-icon">üîç</span>
            </div>
            
            <div class="no-results" id="noResults">
                <h3>No se encontraron resultados</h3>
                <p>Intenta con otros t√©rminos de b√∫squeda</p>
            </div>
            
            <div class="categories-container" id="categoriesContainer">
                <!-- Las tarjetas se generan din√°micamente -->
            </div>
        </main>
    </div>

    <!-- Modal para mostrar detalles de conceptos -->
    <div class="modal" id="conceptModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalConceptTitle"></h2>
                <div id="modalConceptSubtitle" class="modal-subtitle"></div>
                <button class="close-modal" id="closeModal" aria-label="Cerrar ventana">&times;</button>
            </div>
            <div class="modal-body" id="modalConceptBody">
                <!-- El contenido se cargar√° aqu√≠ -->
            </div>
        </div>
    </div>

    <script>
        const conceptData = {
            // EL VIAJE DE LA INVESTIGACI√ìN
            'el_problema': { id: 'el_problema', title: '1. El Problema: La Llave Rota', category: 'journey' },
            'la_pregunta': { id: 'la_pregunta', title: '2. La Pregunta y la Hip√≥tesis', category: 'journey' },
            'los_resultados': { id: 'los_resultados', title: '3. Los Resultados: ¬øQu√© Encontramos?', category: 'journey' },
            'la_discusion': { id: 'la_discusion', title: '4. La Discusi√≥n: ¬øQu√© Significa?', category: 'journey' },
            
            // MARCO TE√ìRICO
            'vygotsky': { id: 'vygotsky', title: 'Vygotsky: El Aprendizaje es Social', category: 'theory' },
            'kolb': { id: 'kolb', title: 'Kolb: Se Aprende Haciendo (y Sintiendo)', category: 'theory' },
            'eps': { id: 'eps', title: 'EpS: Educar para Transformar', category: 'theory' },
            
            // HALLAZGOS CLAVE
            'epa': { id: 'epa', title: 'El Efecto de Preservaci√≥n Actitudinal (EPA)', category: 'findings' },
            'brecha': { id: 'brecha', title: 'La Persistencia de la Brecha Actitud-Conducta', category: 'findings' },
            'falla_psicometrica': { id: 'falla_psicometrica', title: 'El Hallazgo Metodol√≥gico Central', category: 'findings' },

            // IMPLICACIONES Y FUTURO
            'para_docentes': { id: 'para_docentes', title: 'Para Docentes: Implicaciones Pr√°cticas', category: 'implications' },
            'para_instituciones': { id: 'para_instituciones', title: 'Para Instituciones: Hoja de Ruta', category: 'implications' },
            'proyecciones_futuras': { id: 'proyecciones_futuras', title: 'Proyecciones: ¬øQu√© Sigue?', category: 'implications' },

            // CONCEPTOS FUNDAMENTALES
            'conciencia_ecologica': { id: 'conciencia_ecologica', title: 'Conciencia Ecol√≥gica (3D)', category: 'concepts' },
            'integracion_curricular': { id: 'integracion_curricular', title: 'Integraci√≥n Curricular', category: 'concepts' },
        };

        const conceptContent = {
            'el_problema': `<h3>La Analog√≠a de la "Llave Rota"</h3><div class="application-context"><p>Nuestra investigaci√≥n parte de una imagen simple: una llave de agua goteando en una escuela. Este goteo simboliza la <strong>indiferencia normalizada</strong> frente a un problema ambiental visible y conocido. El problema no es t√©cnico ("ingenier√≠a del grifo"), sino cultural. La soluci√≥n no es solo arreglar la llave, sino cultivar una <strong>"pedagog√≠a de la mirada"</strong> que nos ense√±e a ver el goteo como una interpelaci√≥n a nuestra responsabilidad.</p></div>`,
            'la_pregunta': `<h3>La Pregunta Central</h3><div class="application-context"><p>¬øQu√© efecto ejerce la integraci√≥n de contenidos de educaci√≥n ambiental en el curr√≠culo escolar sobre las dimensiones <strong>cognitiva, afectiva y conductual</strong> de la conciencia ecol√≥gica en estudiantes de octavo grado?</p></div><h3>La Hip√≥tesis</h3><div class="application-context"><p>Nuestra hip√≥tesis (H‚ÇÅ) fue que la intervenci√≥n tendr√≠a un <strong>efecto significativo y positivo</strong>. Es decir, que una intervenci√≥n bien dise√±ada podr√≠a, efectivamente, empezar a "cerrar la llave" de la indiferencia.</p></div>`,
            'los_resultados': `<h3>Resumen del Veredicto</h3><div class="application-context"><p>Los datos confirmaron nuestra hip√≥tesis principal (H‚ÇÅ). La intervenci√≥n tuvo un impacto global positivo. Espec√≠ficamente, encontramos:</p><ul><li>Un <strong>efecto grande</strong> en la dimensi√≥n <strong>Afectiva</strong> (r = .59), analizado con la <a href="https://gconchae.github.io/herramientas-estadisticas-tesis/?tool=mann-whitney" target="_blank">Prueba U de Mann-Whitney</a>.</li><li>Un efecto <strong>moderado</strong> en la dimensi√≥n <strong>Cognitiva</strong> (r = .40), aunque este resultado debe tomarse con cautela.</li><li>Un efecto <strong>peque√±o-moderado</strong> en la dimensi√≥n <strong>Conductual</strong> (r = .27).</li></ul><p>En resumen: la intervenci√≥n fue muy eficaz para proteger las actitudes y mejorar el conocimiento, pero m√°s modesta para cambiar los h√°bitos diarios.</p></div>`,
            'la_discusion': `<h3>Interpretando los N√∫meros</h3><div class="application-context"><p>La discusi√≥n se centra en tres grandes ideas:</p><ol><li>El <strong>Efecto de Preservaci√≥n Actitudinal (EPA)</strong> explica el gran impacto en la dimensi√≥n afectiva.</li><li>La persistencia de la <strong>Brecha Actitud-Conducta</strong> explica por qu√© la mejora en las pr√°cticas fue m√°s modesta.</li><li>El <strong>Hallazgo Metodol√≥gico Central</strong> (la baja fiabilidad de la subescala cognitiva) nos ense√±a sobre la dificultad de medir el conocimiento ambiental.</li></ol><p>La conclusi√≥n es que la experiencia (como la salida de campo) sostiene el afecto, y el afecto es la base que habilita la conducta, pero esta √∫ltima necesita de apoyos institucionales para consolidarse.</p></div>`,
            'vygotsky': `<h3>La Idea Central</h3><div class="application-context"><p>Lev Vygotsky nos ense√±√≥ que no aprendemos solos, sino a trav√©s de la interacci√≥n con otros. El aprendizaje es un proceso social mediado por el lenguaje y la cultura. La "Zona de Desarrollo Pr√≥ximo" (ZDP) es el espacio m√°gico donde un estudiante puede lograr algo con ayuda que a√∫n no puede hacer solo.</p></div><h3>Aplicaci√≥n en el Estudio</h3><div class="application-context"><p>Dise√±amos las actividades (debates, trabajos en grupo) como <strong>"andamiajes"</strong> para mover a los estudiantes a trav√©s de su ZDP. El di√°logo y la colaboraci√≥n no fueron un extra, sino el motor principal para co-construir un entendimiento m√°s profundo sobre los problemas ambientales.</p></div>`,
            'kolb': `<h3>La Idea Central</h3><div class="application-context"><p>David Kolb propuso que el aprendizaje aut√©ntico es un ciclo de cuatro pasos: <strong>Experiencia ‚Üí Reflexi√≥n ‚Üí Conceptualizaci√≥n ‚Üí Acci√≥n</strong>. Sostiene que el conocimiento se crea a trav√©s de la transformaci√≥n de la experiencia. No basta con leer sobre algo; hay que vivirlo, pensar en ello, entenderlo y luego aplicarlo.</p></div><h3>Aplicaci√≥n en el Estudio</h3><div class="application-context"><p>Nuestra intervenci√≥n de 8 semanas fue dise√±ada siguiendo exactamente este ciclo. La <strong>salida de campo al r√≠o Guabas</strong> fue la "Experiencia" que ancl√≥ el "Afecto". Los debates y bit√°coras fueron la "Reflexi√≥n". Las sesiones te√≥ricas fueron la "Conceptualizaci√≥n", y los proyectos finales fueron la "Acci√≥n".</p></div>`,
            'eps': `<h3>La Idea Central</h3><div class="application-context"><p>La Educaci√≥n para la Sostenibilidad (EpS), impulsada por te√≥ricos como Stephen Sterling y Daniella Tilbury, va m√°s all√° de la ecolog√≠a. Es un enfoque que busca un cambio profundo en los valores y las pr√°cticas. Su tesis central es que la conducta sostenible solo perdura cuando existe <strong>coherencia institucional</strong>: la escuela debe practicar lo que predica.</p></div><h3>Aplicaci√≥n en el Estudio</h3><div class="application-context"><p>La EpS fue nuestro "horizonte √©tico". Nos record√≥ que para cerrar la <a href="#" onclick="event.preventDefault(); openConceptModal('brecha')">brecha actitud-conducta</a>, no basta con la pedagog√≠a en el aula. Se necesitan <strong>apoyos institucionales</strong> (normas, roles, oportunidades, recursos) que eliminen las barreras y hagan de la sostenibilidad un h√°bito, no solo un proyecto.</p></div>`,
            'epa': `<h3>¬øQu√© es?</h3><div class="application-context"><p>El <strong>Efecto de Preservaci√≥n Actitudinal (EPA)</strong> es el hallazgo m√°s robusto de nuestro estudio. Describe c√≥mo la intervenci√≥n logr√≥ <strong>proteger y mantener las altas actitudes</strong> proambientales del Grupo Experimental, evitando el descenso que s√≠ se observ√≥ en el Grupo Control.</p></div><h3>Evidencia y Magnitud</h3><div class="application-context"><p>El efecto fue <strong>grande (r = .59)</strong>. Mientras el Grupo Experimental mantuvo sus puntajes afectivos, el Grupo Control mostr√≥ un claro declive. Esto sugiere que la intervenci√≥n funcion√≥ como un "escudo" o "vacuna pedag√≥gica" contra la apat√≠a, un efecto que es tan importante como generar nuevas actitudes.</p></div>`,
            'brecha': `<h3>¬øQu√© es?</h3><div class="application-context"><p>Es la conocida discrepancia entre lo que las personas dicen/sienten sobre el medio ambiente y lo que realmente hacen. A pesar de tener actitudes muy positivas, los estudiantes no siempre las traducen en pr√°cticas sostenibles consistentes.</p></div><h3>Evidencia y Magnitud</h3><div class="application-context"><p>Nuestro estudio confirm√≥ esta brecha. El impacto en las actitudes fue grande (r = .59), pero en las conductas fue <strong>peque√±o-moderado (r = .27)</strong>. La mejora fue significativa, pero modesta. Esto se explica por las <strong>barreras contextuales</strong> (falta de infraestructura, de apoyo institucional, etc.) que dificultan la acci√≥n.</p></div>`,
            'falla_psicometrica': `<h3>¬øQu√© es?</h3><div class="application-context"><p>Es el hallazgo de que la parte de nuestra encuesta que med√≠a el conocimiento (dimensi√≥n cognitiva) tuvo una <strong>fiabilidad inaceptablemente baja (<a href="https://gconchae.github.io/herramientas-estadisticas-tesis/?tool=internal-consistency" target="_blank">Œ± = .387</a>)</strong>. Esto significa que la medici√≥n conten√≠a m√°s "ruido" que "se√±al" de conocimiento real.</p></div><h3>Implicaciones</h3><div class="application-context"><p>Aunque los an√°lisis mostraron una mejora "estad√≠sticamente significativa", no podemos confiar en ese resultado. Por honestidad metodol√≥gica, lo declaramos <strong>no concluyente</strong>. Este hallazgo no invalida el estudio, sino que subraya la enorme dificultad de medir un concepto tan complejo como el "saber ambiental" y la urgencia de desarrollar mejores instrumentos.</p></div>`,
            'para_docentes': `<h3>Metodolog√≠as Activas y Cierre Conceptual</h3><div class="application-context"><p>La recomendaci√≥n principal para los docentes es ir m√°s all√° de la clase expositiva. Estrategias como <strong>salidas de campo, debates sobre dilemas locales y proyectos</strong> son incre√≠blemente eficaces para anclar el afecto y movilizar el saber. Es crucial complementar estas experiencias con un <strong>cierre conceptual y r√∫bricas claras</strong> que ayuden a los estudiantes a conectar la experiencia con la teor√≠a.</p></div>`,
            'para_instituciones': `<h3>De Proyecto Aislado a Cultura Escolar</h3><div class="application-context"><p>Las instituciones deben asumir la Educaci√≥n Ambiental como un <strong>eje del Proyecto Educativo Institucional (PEI)</strong>. Esto implica fortalecer el PRAE, destinar recursos, crear <strong>roles visibles (eco-monitores), normas claras y rutinas</strong>, y ofrecer oportunidades semanales de acci√≥n con feedback. El objetivo es pasar del "goteo" de esfuerzos aislados a una cultura de sostenibilidad coherente.</p></div>`,
            'proyecciones_futuras': `<h3>Nuevas Preguntas de Investigaci√≥n</h3><div class="application-context"><ul><li><strong>Rigor Metodol√≥gico:</strong> Realizar dise√±os experimentales con aleatorizaci√≥n para establecer causalidad de forma m√°s robusta.</li><li><strong>Instrumentos:</strong> La tarea m√°s urgente es refinar la subescala cognitiva, realizando an√°lisis m√°s avanzados (como la Teor√≠a de Respuesta al √çtem) y pilotajes exhaustivos.</li><li><strong>Enfoques Integrales:</strong> Realizar estudios longitudinales (para medir el efecto a largo plazo) y mixtos (para entender las barreras contextuales en profundidad).</li></ul></div>`,
            'conciencia_ecologica': `<h3>Definici√≥n</h3><div class="application-context"><p>Es un constructo multidimensional que integra la comprensi√≥n intelectual (<strong>Saber - Cognitiva</strong>), el v√≠nculo emocional (<strong>Sentir - Afectiva</strong>) y las pr√°cticas proambientales (<strong>Hacer - Conductual</strong>). Nuestro estudio demuestra que estas tres dimensiones son interdependientes, pero no siempre se mueven al mismo ritmo.</p></div>`,
            'integracion_curricular': `<h3>Definici√≥n</h3><div class="application-context"><p>Fue nuestra estrategia de intervenci√≥n. En lugar de tratar la educaci√≥n ambiental como un taller aislado, la <strong>integramos sistem√°ticamente en el curr√≠culo de Ciencias Naturales durante 8 semanas</strong>. El objetivo era conectar los contenidos ambientales con los temas regulares de la asignatura, demostrando que la sostenibilidad no es un tema aparte, sino una lente a trav√©s de la cual se puede ver toda la ciencia.</p></div>`,
        };

        const categoriesData = [
            { id: 'journey', title: 'EL VIAJE DE LA INVESTIGACI√ìN', type: 'journey' },
            { id: 'theory', title: 'MARCO TE√ìRICO: LOS PILARES DEL ESTUDIO', type: 'theory' },
            { id: 'findings', title: 'HALLAZGOS CLAVE', type: 'findings' },
            { id: 'implications', title: 'IMPLICACIONES Y PROYECCIONES', type: 'implications' },
            { id: 'concepts', title: 'CONCEPTOS FUNDAMENTALES', type: 'concepts' }
        ];

        const conceptRelations = {
            'el_problema': ['brecha'],
            'la_pregunta': ['conciencia_ecologica', 'integracion_curricular'],
            'los_resultados': ['epa', 'brecha', 'falla_psicometrica'],
            'la_discusion': ['epa', 'brecha', 'falla_psicometrica', 'vygotsky', 'kolb', 'eps'],
            'vygotsky': ['kolb', 'eps'],
            'kolb': ['vygotsky', 'eps', 'epa'],
            'eps': ['vygotsky', 'kolb', 'para_instituciones'],
            'epa': ['los_resultados', 'la_discusion', 'kolb'],
            'brecha': ['el_problema', 'los_resultados', 'la_discusion', 'eps', 'para_instituciones'],
            'falla_psicometrica': ['los_resultados', 'la_discusion', 'proyecciones_futuras'],
            'para_docentes': ['kolb', 'vygotsky', 'integracion_curricular'],
            'para_instituciones': ['eps', 'brecha'],
            'proyecciones_futuras': ['falla_psicometrica'],
        };
        
        let currentConceptIndex = 0;
        let allConcepts = [];
        let filteredConcepts = [];

        const categoriesContainer = document.getElementById('categoriesContainer');
        const conceptModal = document.getElementById('conceptModal');
        const modalConceptTitle = document.getElementById('modalConceptTitle');
        const modalConceptSubtitle = document.getElementById('modalConceptSubtitle');
        const modalConceptBody = document.getElementById('modalConceptBody');
        const closeModal = document.getElementById('closeModal');
        const conceptSearch = document.getElementById('conceptSearch');
        const noResults = document.getElementById('noResults');

        function renderCategoryCards(filter = '') {
            const lowerCaseFilter = filter.toLowerCase();
            categoriesContainer.innerHTML = '';
            
            categoriesData.forEach(category => {
                const conceptsInCategory = Object.values(conceptData).filter(item => {
                    const matchesCategory = item.category === category.type;
                    const matchesFilter = filter === '' || item.title.toLowerCase().includes(lowerCaseFilter);
                    return matchesCategory && matchesFilter;
                });

                if (conceptsInCategory.length > 0) {
                    const card = document.createElement('div');
                    card.className = `category-card ${category.type}`;
                    
                    let conceptsHTML = '<ul class="concepts-list">';
                    conceptsInCategory.forEach(concept => {
                        conceptsHTML += `
                            <li onclick="openConceptModal('${concept.id}')" data-searchable="${concept.title.toLowerCase()}">
                                ${concept.title}
                            </li>
                        `;
                    });
                    conceptsHTML += '</ul>';
                    
                    card.innerHTML = `<h3>${category.title}</h3>${conceptsHTML}`;
                    categoriesContainer.appendChild(card);
                }
            });

            filteredConcepts = Object.values(conceptData).filter(c => c.title.toLowerCase().includes(lowerCaseFilter));
            noResults.style.display = filteredConcepts.length === 0 ? 'block' : 'none';
        }

        function openConceptModal(contentKey) {
            conceptModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            const concept = conceptData[contentKey];
            const content = conceptContent[contentKey] || '<p>Contenido no disponible.</p>';
            
            modalConceptTitle.textContent = concept.title;
            modalConceptSubtitle.textContent = concept.subtitle || '';
            
            currentConceptIndex = filteredConcepts.findIndex(c => c.id === contentKey);
            
            let modalContent = content;

            const relations = conceptRelations[contentKey];
            if (relations && relations.length > 0) {
                let linksHTML = '<h3>Conectado con:</h3><div class="related-concepts-container">';
                relations.forEach(relatedKey => {
                    const relatedConcept = conceptData[relatedKey];
                    if (relatedConcept) {
                        linksHTML += `<div class="related-link" onclick="openConceptModal('${relatedKey}')">${relatedConcept.title}</div>`;
                    }
                });
                linksHTML += '</div>';
                modalContent += `<div class="info-section">${linksHTML}</div>`;
            }

            modalContent += `<div class="modal-navigation">
                <button id="prevConcept" class="nav-btn" ${currentConceptIndex <= 0 ? 'disabled' : ''}>‚Üê Anterior</button>
                <button id="nextConcept" class="nav-btn" ${currentConceptIndex >= filteredConcepts.length - 1 ? 'disabled' : ''}>Siguiente ‚Üí</button>
            </div>`;
            
            modalConceptBody.innerHTML = modalContent;
            
            document.getElementById('prevConcept').addEventListener('click', navigateToPrevConcept);
            document.getElementById('nextConcept').addEventListener('click', navigateToNextConcept);
            
            closeModal.focus();
        }
        
        function navigateToPrevConcept() { if (currentConceptIndex > 0) openConceptModal(filteredConcepts[currentConceptIndex - 1].id); }
        function navigateToNextConcept() { if (currentConceptIndex < filteredConcepts.length - 1) openConceptModal(filteredConcepts[currentConceptIndex + 1].id); }
        function closeConceptModal() { conceptModal.style.display = 'none'; document.body.style.overflow = 'auto'; }

        closeModal.addEventListener('click', closeConceptModal);
        conceptModal.addEventListener('click', e => { if (e.target === conceptModal) closeConceptModal(); });
        conceptSearch.addEventListener('input', e => renderCategoryCards(e.target.value));
        
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && conceptModal.style.display === 'block') closeConceptModal();
            if (conceptModal.style.display === 'block') {
                if (event.key === 'ArrowLeft') navigateToPrevConcept();
                else if (event.key === 'ArrowRight') navigateToNextConcept();
            }
        });

        window.openConceptModal = openConceptModal;
        document.addEventListener('DOMContentLoaded', () => renderCategoryCards());
    </script>
</body>
</html>